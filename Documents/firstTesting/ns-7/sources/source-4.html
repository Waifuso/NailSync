


<!DOCTYPE html>
<html id="htmlId">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"> 
  <title>Coverage Report > SendEmailService</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">phong.demo.Springpro</a>
</div>

<h1>Coverage Summary for Class: SendEmailService (phong.demo.Springpro)</h1>

<table class="coverageStats">
<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Class, %
</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Branch, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">SendEmailService</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (7/7)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    50%
  </span>
  <span class="absValue">
    (5/10)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    93.8%
  </span>
  <span class="absValue">
    (75/80)
  </span>
</td>
</tr>

</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;package phong.demo.Springpro;
&nbsp;
&nbsp;import jakarta.transaction.Transactional;
&nbsp;import org.springframework.beans.factory.annotation.Autowired;
&nbsp;import org.springframework.beans.factory.annotation.Value;
&nbsp;import org.springframework.core.io.ClassPathResource;
&nbsp;import org.springframework.mail.SimpleMailMessage;
&nbsp;import org.springframework.mail.javamail.JavaMailSender;
&nbsp;import org.springframework.stereotype.Service;
&nbsp;
&nbsp;
&nbsp;import jakarta.mail.MessagingException;
&nbsp;import jakarta.mail.internet.MimeMessage;
&nbsp;import org.springframework.mail.javamail.MimeMessageHelper;
&nbsp;
&nbsp;import java.time.LocalDate;
&nbsp;import java.time.format.DateTimeFormatter;
&nbsp;import java.util.Random;
&nbsp;
&nbsp;
&nbsp;@Service
<b class="fc">&nbsp;public class SendEmailService {</b>
&nbsp;
&nbsp;    @Autowired
&nbsp;    private JavaMailSender javaMailSender;
&nbsp;
&nbsp;    @Value(&quot;$(spring.mail.username)&quot;)
&nbsp;    private String fromEmailId;
&nbsp;
&nbsp;    public void SendEmail (String recipient, String body, String subject ) {
<b class="fc">&nbsp;        SimpleMailMessage simpleMailMessage = new SimpleMailMessage();</b>
<b class="fc">&nbsp;        simpleMailMessage.setFrom(fromEmailId);</b>
<b class="fc">&nbsp;        simpleMailMessage.setTo(recipient);</b>
<b class="fc">&nbsp;        simpleMailMessage.setText(body);</b>
<b class="fc">&nbsp;        simpleMailMessage.setSubject(subject);</b>
&nbsp;
<b class="fc">&nbsp;        javaMailSender.send(simpleMailMessage);</b>
&nbsp;
&nbsp;
&nbsp;
&nbsp;
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Sends a beautifully designed appointment confirmation email with confirmation code.
&nbsp;     *
&nbsp;     * @param recipient          Email address of the recipient
&nbsp;     * @param subject            Subject line for the email
&nbsp;     * @param confirmationNumber The confirmation code to display in the email
&nbsp;     * @throws MessagingException If there&#39;s an error sending the email
&nbsp;     */
&nbsp;    public void sendEmailWithHtml(String recipient, String subject, Integer confirmationNumber) throws MessagingException {
<b class="fc">&nbsp;        MimeMessage message = javaMailSender.createMimeMessage();</b>
<b class="fc">&nbsp;        MimeMessageHelper helper = new MimeMessageHelper(message, true, &quot;UTF-8&quot;);</b>
&nbsp;
<b class="fc">&nbsp;        helper.setFrom(fromEmailId);</b>
<b class="fc">&nbsp;        helper.setTo(recipient);</b>
<b class="fc">&nbsp;        helper.setSubject(subject);</b>
&nbsp;
&nbsp;        // Get current date for the appointment date
<b class="fc">&nbsp;        LocalDate appointmentDate = LocalDate.now().plusDays(1); // Assuming appointment is for tomorrow</b>
<b class="fc">&nbsp;        String formattedDate = appointmentDate.format(DateTimeFormatter.ofPattern(&quot;EEEE, MMMM d&quot;));</b>
&nbsp;
&nbsp;        // Set a default appointment time for demonstration
<b class="fc">&nbsp;        String appointmentTime = &quot;2:30 PM&quot;;</b>
&nbsp;
<b class="fc">&nbsp;        String body = &quot;&quot;&quot;</b>
&nbsp;&lt;!DOCTYPE html&gt;
&nbsp;&lt;html&gt;
&nbsp;&lt;head&gt;
&nbsp;    &lt;meta charset=&quot;UTF-8&quot;&gt;
&nbsp;    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
&nbsp;&lt;/head&gt;
&nbsp;&lt;body style=&quot;margin: 0; padding: 0; font-family: &#39;Helvetica Neue&#39;, Arial, sans-serif; background-color: #f0f4f8; color: #333333;&quot;&gt;
&nbsp;    &lt;table align=&quot;center&quot; border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; width=&quot;100%%&quot; style=&quot;max-width: 600px; margin: 20px auto;&quot;&gt;
&nbsp;        &lt;!-- Header Banner --&gt;
&nbsp;        &lt;tr&gt;
&nbsp;            &lt;td style=&quot;background: linear-gradient(135deg, #9c27b0 0%%, #673ab7 100%%); padding: 0; border-radius: 10px 10px 0 0; text-align: center;&quot;&gt;
&nbsp;                &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; width=&quot;100%%&quot;&gt;
&nbsp;                    &lt;tr&gt;
&nbsp;                        &lt;td align=&quot;center&quot; style=&quot;padding: 30px 20px;&quot;&gt;
&nbsp;                            &lt;img src=&quot;cid:nailsyncLogo&quot; alt=&quot;NAILSYNC Logo&quot; style=&quot;height: 60px; margin-bottom: 15px;&quot;&gt;
&nbsp;                            &lt;h1 style=&quot;margin: 0; color: #ffffff; font-size: 28px; font-weight: 700;&quot;&gt;Your Appointment is Confirmed!&lt;/h1&gt;
&nbsp;                        &lt;/td&gt;
&nbsp;                    &lt;/tr&gt;
&nbsp;                &lt;/table&gt;
&nbsp;            &lt;/td&gt;
&nbsp;        &lt;/tr&gt;
&nbsp;        
&nbsp;        &lt;!-- Main Content --&gt;
&nbsp;        &lt;tr&gt;
&nbsp;            &lt;td style=&quot;background-color: #ffffff; padding: 0; border-left: 1px solid #e1e8ed; border-right: 1px solid #e1e8ed;&quot;&gt;
&nbsp;                &lt;!-- Confirmation Details --&gt;
&nbsp;                &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; width=&quot;100%%&quot;&gt;
&nbsp;                    &lt;tr&gt;
&nbsp;                        &lt;td align=&quot;center&quot; style=&quot;padding: 40px 30px 20px 30px;&quot;&gt;
&nbsp;                            &lt;!-- Appointment Time Banner --&gt;
&nbsp;                            &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%%; margin-bottom: 30px; background: linear-gradient(to right, #f5f7fa, #e4e7eb); border-radius: 8px;&quot;&gt;
&nbsp;                                &lt;tr&gt;
&nbsp;                                    &lt;td style=&quot;padding: 20px; text-align: center;&quot;&gt;
&nbsp;                                        &lt;p style=&quot;margin: 0 0 5px 0; font-size: 14px; color: #666666; text-transform: uppercase; letter-spacing: 1px;&quot;&gt;YOUR APPOINTMENT&lt;/p&gt;
&nbsp;                                        &lt;h2 style=&quot;margin: 0; color: #333333; font-size: 22px; font-weight: 600;&quot;&gt;%s • %s&lt;/h2&gt;
&nbsp;                                    &lt;/td&gt;
&nbsp;                                &lt;/tr&gt;
&nbsp;                            &lt;/table&gt;
&nbsp;                            
&nbsp;                            &lt;p style=&quot;margin: 0 0 25px 0; font-size: 16px; line-height: 1.6; color: #666666; text-align: center;&quot;&gt;Please use this confirmation code when you arrive:&lt;/p&gt;
&nbsp;                            
&nbsp;                            &lt;!-- Confirmation Code Box --&gt;
&nbsp;                            &lt;div style=&quot;background: linear-gradient(135deg, #f5f7fa 0%%, #e4e7eb 100%%); border: 2px dashed #9c27b0; border-radius: 10px; padding: 20px; margin-bottom: 30px; text-align: center;&quot;&gt;
&nbsp;                                &lt;h1 style=&quot;margin: 0; color: #9c27b0; font-size: 42px; font-weight: 700; letter-spacing: 2px;&quot;&gt;%s&lt;/h1&gt;
&nbsp;                            &lt;/div&gt;
&nbsp;                            
&nbsp;                            &lt;!-- Benefits Section --&gt;
&nbsp;                            &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; width=&quot;100%%&quot; style=&quot;margin-bottom: 25px;&quot;&gt;
&nbsp;                                &lt;tr&gt;
&nbsp;                                    &lt;td&gt;
&nbsp;                                        &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; width=&quot;100%%&quot;&gt;
&nbsp;                                            &lt;tr&gt;
&nbsp;                                                &lt;td width=&quot;32&quot; valign=&quot;top&quot;&gt;
&nbsp;                                                    &lt;div style=&quot;background-color: #9c27b0; width: 24px; height: 24px; border-radius: 50%%; color: white; text-align: center; line-height: 24px; font-size: 12px; font-weight: bold;&quot;&gt;✓&lt;/div&gt;
&nbsp;                                                &lt;/td&gt;
&nbsp;                                                &lt;td style=&quot;padding-left: 10px; padding-bottom: 15px;&quot;&gt;
&nbsp;                                                    &lt;p style=&quot;margin: 0; color: #333333; font-size: 15px; font-weight: 600;&quot;&gt;Priority Service&lt;/p&gt;
&nbsp;                                                    &lt;p style=&quot;margin: 5px 0 0 0; color: #666666; font-size: 14px;&quot;&gt;Skip the wait with your confirmed appointment&lt;/p&gt;
&nbsp;                                                &lt;/td&gt;
&nbsp;                                            &lt;/tr&gt;
&nbsp;                                            &lt;tr&gt;
&nbsp;                                                &lt;td width=&quot;32&quot; valign=&quot;top&quot;&gt;
&nbsp;                                                    &lt;div style=&quot;background-color: #9c27b0; width: 24px; height: 24px; border-radius: 50%%; color: white; text-align: center; line-height: 24px; font-size: 12px; font-weight: bold;&quot;&gt;✓&lt;/div&gt;
&nbsp;                                                &lt;/td&gt;
&nbsp;                                                &lt;td style=&quot;padding-left: 10px; padding-bottom: 15px;&quot;&gt;
&nbsp;                                                    &lt;p style=&quot;margin: 0; color: #333333; font-size: 15px; font-weight: 600;&quot;&gt;Personalized Care&lt;/p&gt;
&nbsp;                                                    &lt;p style=&quot;margin: 5px 0 0 0; color: #666666; font-size: 14px;&quot;&gt;Your stylist will be prepared for your specific needs&lt;/p&gt;
&nbsp;                                                &lt;/td&gt;
&nbsp;                                            &lt;/tr&gt;
&nbsp;                                            &lt;tr&gt;
&nbsp;                                                &lt;td width=&quot;32&quot; valign=&quot;top&quot;&gt;
&nbsp;                                                    &lt;div style=&quot;background-color: #9c27b0; width: 24px; height: 24px; border-radius: 50%%; color: white; text-align: center; line-height: 24px; font-size: 12px; font-weight: bold;&quot;&gt;✓&lt;/div&gt;
&nbsp;                                                &lt;/td&gt;
&nbsp;                                                &lt;td style=&quot;padding-left: 10px;&quot;&gt;
&nbsp;                                                    &lt;p style=&quot;margin: 0; color: #333333; font-size: 15px; font-weight: 600;&quot;&gt;Exclusive Offers&lt;/p&gt;
&nbsp;                                                    &lt;p style=&quot;margin: 5px 0 0 0; color: #666666; font-size: 14px;&quot;&gt;Ask about our special services for booked clients&lt;/p&gt;
&nbsp;                                                &lt;/td&gt;
&nbsp;                                            &lt;/tr&gt;
&nbsp;                                        &lt;/table&gt;
&nbsp;                                    &lt;/td&gt;
&nbsp;                                &lt;/tr&gt;
&nbsp;                            &lt;/table&gt;
&nbsp;                            
&nbsp;                            &lt;!-- Important Notice --&gt;
&nbsp;                            &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; width=&quot;100%%&quot; style=&quot;background-color: #fff8e1; border-left: 4px solid #ffc107; border-radius: 4px; margin-bottom: 20px;&quot;&gt;
&nbsp;                                &lt;tr&gt;
&nbsp;                                    &lt;td style=&quot;padding: 15px;&quot;&gt;
&nbsp;                                        &lt;p style=&quot;margin: 0; font-size: 14px; line-height: 1.6; color: #b28704;&quot;&gt;
&nbsp;                                            &lt;strong&gt;Important:&lt;/strong&gt; Please arrive 5 minutes before your appointment time. If you&#39;re late for over 15 minutes, you may need to reschedule your appointment.
&nbsp;                                        &lt;/p&gt;
&nbsp;                                    &lt;/td&gt;
&nbsp;                                &lt;/tr&gt;
&nbsp;                            &lt;/table&gt;
&nbsp;                            
&nbsp;                            &lt;!-- Call to Action --&gt;
&nbsp;                            &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; width=&quot;100%%&quot;&gt;
&nbsp;                                &lt;tr&gt;
&nbsp;                                    &lt;td align=&quot;center&quot; style=&quot;padding: 20px 0 10px 0;&quot;&gt;
&nbsp;                                        &lt;div style=&quot;background-color: #9c27b0; border-radius: 50px; display: inline-block;&quot;&gt;
&nbsp;                                            &lt;a href=&quot;#&quot; style=&quot;color: #ffffff; font-size: 16px; font-weight: 600; text-decoration: none; padding: 12px 30px; display: inline-block;&quot;&gt;Manage Appointment&lt;/a&gt;
&nbsp;                                        &lt;/div&gt;
&nbsp;                                    &lt;/td&gt;
&nbsp;                                &lt;/tr&gt;
&nbsp;                            &lt;/table&gt;
&nbsp;                        &lt;/td&gt;
&nbsp;                    &lt;/tr&gt;
&nbsp;                &lt;/table&gt;
&nbsp;            &lt;/td&gt;
&nbsp;        &lt;/tr&gt;
&nbsp;        
&nbsp;        &lt;!-- Footer --&gt;
&nbsp;        &lt;tr&gt;
&nbsp;            &lt;td style=&quot;background-color: #333333; color: #ffffff; padding: 25px; border-radius: 0 0 10px 10px; text-align: center;&quot;&gt;
&nbsp;                &lt;p style=&quot;margin: 0 0 10px 0; font-size: 14px;&quot;&gt;— The NAILSYNC Team&lt;/p&gt;
&nbsp;                &lt;p style=&quot;margin: 0 0 15px 0; font-size: 12px; color: #bbbbbb;&quot;&gt;If you did not request this appointment, please contact us immediately.&lt;/p&gt;
&nbsp;                &lt;p style=&quot;margin: 0; font-size: 12px; color: #bbbbbb;&quot;&gt;© 2025 NAILSYNC • All rights reserved&lt;/p&gt;
&nbsp;            &lt;/td&gt;
&nbsp;        &lt;/tr&gt;
&nbsp;    &lt;/table&gt;
&nbsp;&lt;/body&gt;
&nbsp;&lt;/html&gt;
<b class="fc">&nbsp;&quot;&quot;&quot;.formatted(formattedDate, appointmentTime, confirmationNumber);</b>
&nbsp;
<b class="fc">&nbsp;        helper.setText(body, true); // true = isHtml</b>
&nbsp;
&nbsp;        // Add the logo - with error handling
&nbsp;        try {
<b class="fc">&nbsp;            ClassPathResource image = new ClassPathResource(&quot;NAILSYNC.png&quot;);</b>
<b class="pc">&nbsp;            if (image.exists()) {</b>
<b class="fc">&nbsp;                helper.addInline(&quot;nailsyncLogo&quot;, image);</b>
&nbsp;            }
&nbsp;        } catch (Exception e) {
&nbsp;            // Log error but continue - the email will still send without the logo
<b class="nc">&nbsp;            System.err.println(&quot;Error adding logo to email: &quot; + e.getMessage());</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        javaMailSender.send(message);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Sends a stylish payment confirmation email to the customer.
&nbsp;     *
&nbsp;     * @param recipient Email address of the recipient
&nbsp;     * @param subject   Subject line for the email
&nbsp;     * @param amount    The payment amount to display in the email
&nbsp;     * @throws MessagingException If there&#39;s an error sending the email
&nbsp;     */
&nbsp;    public void paymentSending(String recipient, String subject, double amount) throws MessagingException {
<b class="fc">&nbsp;        MimeMessage message = javaMailSender.createMimeMessage();</b>
<b class="fc">&nbsp;        MimeMessageHelper helper = new MimeMessageHelper(message, true, &quot;UTF-8&quot;);</b>
&nbsp;
<b class="fc">&nbsp;        helper.setFrom(fromEmailId);</b>
<b class="fc">&nbsp;        helper.setTo(recipient);</b>
<b class="fc">&nbsp;        helper.setSubject(subject);</b>
&nbsp;
&nbsp;        // Generate a random receipt number for reference
<b class="fc">&nbsp;        String receiptNumber = &quot;NS-&quot; + (10000 + new Random().nextInt(90000));</b>
&nbsp;
&nbsp;        // Get current date formatted nicely
<b class="fc">&nbsp;        String formattedDate = LocalDate.now().format(DateTimeFormatter.ofPattern(&quot;MMMM d, yyyy&quot;));</b>
&nbsp;
<b class="fc">&nbsp;        String body = &quot;&quot;&quot;</b>
&nbsp;&lt;!DOCTYPE html&gt;
&nbsp;&lt;html&gt;
&nbsp;&lt;head&gt;
&nbsp;    &lt;meta charset=&quot;UTF-8&quot;&gt;
&nbsp;    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
&nbsp;&lt;/head&gt;
&nbsp;&lt;body style=&quot;margin: 0; padding: 0; font-family: &#39;Helvetica Neue&#39;, Arial, sans-serif; background-color: #f0f4f8; color: #333333;&quot;&gt;
&nbsp;    &lt;table align=&quot;center&quot; border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; width=&quot;100%%&quot; style=&quot;max-width: 600px; margin: 20px auto;&quot;&gt;
&nbsp;        &lt;!-- Header --&gt;
&nbsp;        &lt;tr&gt;
&nbsp;            &lt;td align=&quot;center&quot; style=&quot;background-color: #2c3e50; padding: 25px; border-radius: 10px 10px 0 0; text-align: center;&quot;&gt;
&nbsp;                &lt;img src=&quot;cid:nailsyncLogo&quot; alt=&quot;NAILSYNC Logo&quot; style=&quot;height: 60px;&quot;&gt;
&nbsp;            &lt;/td&gt;
&nbsp;        &lt;/tr&gt;
&nbsp;        
&nbsp;        &lt;!-- Main Content --&gt;
&nbsp;        &lt;tr&gt;
&nbsp;            &lt;td style=&quot;background-color: #ffffff; padding: 0; border-left: 1px solid #e1e8ed; border-right: 1px solid #e1e8ed;&quot;&gt;
&nbsp;                &lt;!-- Payment Confirmation --&gt;
&nbsp;                &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; width=&quot;100%%&quot;&gt;
&nbsp;                    &lt;tr&gt;
&nbsp;                        &lt;td align=&quot;center&quot; style=&quot;padding: 40px 30px 0 30px;&quot;&gt;
&nbsp;                            &lt;!-- Success Icon --&gt;
&nbsp;                            &lt;div style=&quot;background-color: #e8f5e9; width: 80px; height: 80px; border-radius: 50%%; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px auto;&quot;&gt;
&nbsp;                                &lt;div style=&quot;color: #4CAF50; font-size: 36px; line-height: 1;&quot;&gt;✓&lt;/div&gt;
&nbsp;                            &lt;/div&gt;
&nbsp;                            
&nbsp;                            &lt;h2 style=&quot;margin: 0; color: #2c3e50; font-size: 24px; font-weight: 600;&quot;&gt;Payment Successful!&lt;/h2&gt;
&nbsp;                            &lt;p style=&quot;margin: 10px 0 25px 0; color: #7f8c8d; font-size: 16px;&quot;&gt;Thank you for your payment with &lt;strong&gt;NAILSYNC&lt;/strong&gt;&lt;/p&gt;
&nbsp;                            
&nbsp;                            &lt;div style=&quot;width: 60px; height: 3px; background-color: #4CAF50; margin: 0 auto 30px auto;&quot;&gt;&lt;/div&gt;
&nbsp;                        &lt;/td&gt;
&nbsp;                    &lt;/tr&gt;
&nbsp;                &lt;/table&gt;
&nbsp;                
&nbsp;                &lt;!-- Payment Details --&gt;
&nbsp;                &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; width=&quot;100%%&quot;&gt;
&nbsp;                    &lt;tr&gt;
&nbsp;                        &lt;td align=&quot;center&quot; style=&quot;padding: 0 30px 30px 30px;&quot;&gt;
&nbsp;                            &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;width: 100%%; background-color: #f8fafb; border-radius: 10px;&quot;&gt;
&nbsp;                                &lt;tr&gt;
&nbsp;                                    &lt;td style=&quot;padding: 20px;&quot;&gt;
&nbsp;                                        &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; width=&quot;100%%&quot;&gt;
&nbsp;                                            &lt;tr&gt;
&nbsp;                                                &lt;td style=&quot;padding: 10px 0; border-bottom: 1px solid #e1e8ed;&quot;&gt;
&nbsp;                                                    &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; width=&quot;100%%&quot;&gt;
&nbsp;                                                        &lt;tr&gt;
&nbsp;                                                            &lt;td width=&quot;50%%&quot; style=&quot;color: #7f8c8d; font-size: 14px;&quot;&gt;Receipt Number&lt;/td&gt;
&nbsp;                                                            &lt;td width=&quot;50%%&quot; style=&quot;text-align: right; color: #34495e; font-size: 14px; font-weight: 600;&quot;&gt;%s&lt;/td&gt;
&nbsp;                                                        &lt;/tr&gt;
&nbsp;                                                    &lt;/table&gt;
&nbsp;                                                &lt;/td&gt;
&nbsp;                                            &lt;/tr&gt;
&nbsp;                                            &lt;tr&gt;
&nbsp;                                                &lt;td style=&quot;padding: 10px 0; border-bottom: 1px solid #e1e8ed;&quot;&gt;
&nbsp;                                                    &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; width=&quot;100%%&quot;&gt;
&nbsp;                                                        &lt;tr&gt;
&nbsp;                                                            &lt;td width=&quot;50%%&quot; style=&quot;color: #7f8c8d; font-size: 14px;&quot;&gt;Date&lt;/td&gt;
&nbsp;                                                            &lt;td width=&quot;50%%&quot; style=&quot;text-align: right; color: #34495e; font-size: 14px; font-weight: 600;&quot;&gt;%s&lt;/td&gt;
&nbsp;                                                        &lt;/tr&gt;
&nbsp;                                                    &lt;/table&gt;
&nbsp;                                                &lt;/td&gt;
&nbsp;                                            &lt;/tr&gt;
&nbsp;                                            &lt;tr&gt;
&nbsp;                                                &lt;td style=&quot;padding: 15px 0;&quot;&gt;
&nbsp;                                                    &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; width=&quot;100%%&quot;&gt;
&nbsp;                                                        &lt;tr&gt;
&nbsp;                                                            &lt;td width=&quot;50%%&quot; style=&quot;color: #7f8c8d; font-size: 14px;&quot;&gt;Amount Paid&lt;/td&gt;
&nbsp;                                                            &lt;td width=&quot;50%%&quot; style=&quot;text-align: right; color: #4CAF50; font-size: 24px; font-weight: 700;&quot;&gt;$%.2f&lt;/td&gt;
&nbsp;                                                        &lt;/tr&gt;
&nbsp;                                                    &lt;/table&gt;
&nbsp;                                                &lt;/td&gt;
&nbsp;                                            &lt;/tr&gt;
&nbsp;                                        &lt;/table&gt;
&nbsp;                                    &lt;/td&gt;
&nbsp;                                &lt;/tr&gt;
&nbsp;                            &lt;/table&gt;
&nbsp;                            
&nbsp;                            &lt;!-- Thank You Message --&gt;
&nbsp;                            &lt;p style=&quot;margin: 30px 0 10px 0; font-size: 16px; line-height: 1.6; color: #34495e;&quot;&gt;We appreciate your business and look forward to serving you again!&lt;/p&gt;
&nbsp;                            &lt;p style=&quot;margin: 0; font-size: 14px; color: #7f8c8d;&quot;&gt;If you have any questions, feel free to contact us.&lt;/p&gt;
&nbsp;                        &lt;/td&gt;
&nbsp;                    &lt;/tr&gt;
&nbsp;                &lt;/table&gt;
&nbsp;            &lt;/td&gt;
&nbsp;        &lt;/tr&gt;
&nbsp;        
&nbsp;        &lt;!-- Footer --&gt;
&nbsp;        &lt;tr&gt;
&nbsp;            &lt;td style=&quot;background-color: #2c3e50; color: #ffffff; padding: 25px; border-radius: 0 0 10px 10px; text-align: center;&quot;&gt;
&nbsp;                &lt;p style=&quot;margin: 0 0 10px 0; font-size: 14px;&quot;&gt;— The NAILSYNC Team&lt;/p&gt;
&nbsp;                &lt;p style=&quot;margin: 0; font-size: 12px; color: #bdc3c7;&quot;&gt;© 2025 NAILSYNC • All rights reserved&lt;/p&gt;
&nbsp;            &lt;/td&gt;
&nbsp;        &lt;/tr&gt;
&nbsp;    &lt;/table&gt;
&nbsp;&lt;/body&gt;
&nbsp;&lt;/html&gt;
<b class="fc">&nbsp;&quot;&quot;&quot;.formatted(receiptNumber, formattedDate, amount);</b>
&nbsp;
<b class="fc">&nbsp;        helper.setText(body, true); // true = isHtml</b>
&nbsp;
&nbsp;        // Add the logo - with error handling
&nbsp;        try {
<b class="fc">&nbsp;            ClassPathResource image = new ClassPathResource(&quot;NAILSYNC.png&quot;);</b>
<b class="pc">&nbsp;            if (image.exists()) {</b>
<b class="fc">&nbsp;                helper.addInline(&quot;nailsyncLogo&quot;, image);</b>
&nbsp;            }
&nbsp;        } catch (Exception e) {
&nbsp;            // Log error but continue - the email will still send without the logo
<b class="nc">&nbsp;            System.err.println(&quot;Error adding logo to email: &quot; + e.getMessage());</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        javaMailSender.send(message);</b>
&nbsp;    }
&nbsp;
&nbsp;/**
&nbsp;     * Sends a stylish daily report email with earnings information.
&nbsp;     *
&nbsp;     * @param recipient     Email address of the recipient
&nbsp;     * @param subject       Subject line for the email
&nbsp;     * @param totalEarnings The total earnings to display in the email
&nbsp;     * @throws MessagingException If there&#39;s an error sending the email
&nbsp;     */
&nbsp;    public void dailyReport(String recipient, String subject, double totalEarnings) throws MessagingException {
<b class="fc">&nbsp;        MimeMessage message = javaMailSender.createMimeMessage();</b>
<b class="fc">&nbsp;        MimeMessageHelper helper = new MimeMessageHelper(message, true, &quot;UTF-8&quot;);</b>
&nbsp;
<b class="fc">&nbsp;        helper.setFrom(fromEmailId);</b>
<b class="fc">&nbsp;        helper.setTo(recipient);</b>
<b class="fc">&nbsp;        helper.setSubject(subject);</b>
&nbsp;
<b class="fc">&nbsp;        String formattedDate = LocalDate.now().format(DateTimeFormatter.ofPattern(&quot;EEEE, MMMM d, yyyy&quot;));</b>
&nbsp;
<b class="fc">&nbsp;        String body = &quot;&quot;&quot;</b>
&nbsp;&lt;!DOCTYPE html&gt;
&nbsp;&lt;html&gt;
&nbsp;&lt;head&gt;
&nbsp;    &lt;meta charset=&quot;UTF-8&quot;&gt;
&nbsp;    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
&nbsp;&lt;/head&gt;
&nbsp;&lt;body style=&quot;margin: 0; padding: 0; font-family: &#39;Helvetica Neue&#39;, Arial, sans-serif; background-color: #f0f4f8; color: #333333;&quot;&gt;
&nbsp;    &lt;table align=&quot;center&quot; border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; width=&quot;100%%&quot; style=&quot;max-width: 600px; margin: 20px auto;&quot;&gt;
&nbsp;        &lt;!-- Logo Header Bar --&gt;
&nbsp;        &lt;tr&gt;
&nbsp;            &lt;td align=&quot;center&quot; style=&quot;background-color: #2c3e50; padding: 20px; border-radius: 10px 10px 0 0;&quot;&gt;
&nbsp;                &lt;img src=&quot;cid:nailsyncLogo&quot; alt=&quot;NAILSYNC Logo&quot; style=&quot;height: 70px;&quot;&gt;
&nbsp;            &lt;/td&gt;
&nbsp;        &lt;/tr&gt;
&nbsp;        
&nbsp;        &lt;!-- Main Content --&gt;
&nbsp;        &lt;tr&gt;
&nbsp;            &lt;td style=&quot;background-color: #ffffff; padding: 0; border-left: 1px solid #e1e8ed; border-right: 1px solid #e1e8ed;&quot;&gt;
&nbsp;                &lt;!-- Date Header --&gt;
&nbsp;                &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; width=&quot;100%%&quot;&gt;
&nbsp;                    &lt;tr&gt;
&nbsp;                        &lt;td align=&quot;center&quot; style=&quot;padding: 25px 30px 0 30px;&quot;&gt;
&nbsp;                            &lt;h2 style=&quot;margin: 0; color: #2c3e50; font-size: 24px; font-weight: 600;&quot;&gt;Daily Report&lt;/h2&gt;
&nbsp;                            &lt;p style=&quot;margin: 5px 0 0 0; font-size: 16px; color: #7f8c8d;&quot;&gt;%s&lt;/p&gt;
&nbsp;                            &lt;div style=&quot;width: 50px; height: 3px; background-color: #4CAF50; margin: 20px auto;&quot;&gt;&lt;/div&gt;
&nbsp;                        &lt;/td&gt;
&nbsp;                    &lt;/tr&gt;
&nbsp;                &lt;/table&gt;
&nbsp;                
&nbsp;                &lt;!-- Earnings Section --&gt;
&nbsp;                &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; width=&quot;100%%&quot;&gt;
&nbsp;                    &lt;tr&gt;
&nbsp;                        &lt;td align=&quot;center&quot; style=&quot;padding: 20px 30px 30px 30px;&quot;&gt;
&nbsp;                            &lt;div style=&quot;background: linear-gradient(135deg, #f6f9fc 0%%, #ecf0f1 100%%); border-radius: 10px; padding: 30px; box-shadow: 0 4px 6px rgba(0,0,0,0.05);&quot;&gt;
&nbsp;                                &lt;p style=&quot;margin: 0 0 10px 0; font-size: 18px; color: #34495e; font-weight: 600;&quot;&gt;TODAY&#39;S TOTAL EARNINGS&lt;/p&gt;
&nbsp;                                &lt;h1 style=&quot;margin: 0; font-size: 48px; font-weight: 700; color: #4CAF50;&quot;&gt;$%.2f&lt;/h1&gt;
&nbsp;                                
&nbsp;                                &lt;div style=&quot;width: 100%%; margin-top: 25px; height: 10px; background-color: #ecf0f1; border-radius: 5px; overflow: hidden;&quot;&gt;
&nbsp;                                    &lt;div style=&quot;width: 75%%; height: 10px; background: linear-gradient(90deg, #4CAF50 0%%, #2ecc71 100%%); border-radius: 5px;&quot;&gt;&lt;/div&gt;
&nbsp;                                &lt;/div&gt;
&nbsp;                                
&nbsp;                                &lt;p style=&quot;margin: 15px 0 0 0; font-size: 14px; color: #7f8c8d;&quot;&gt;75%% of your target goal&lt;/p&gt;
&nbsp;                            &lt;/div&gt;
&nbsp;                            
&nbsp;                            &lt;!-- Yesterday Comparison --&gt;
&nbsp;                            &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;margin-top: 20px; width: 100%%;&quot;&gt;
&nbsp;                                &lt;tr&gt;
&nbsp;                                    &lt;td style=&quot;background-color: #f8fafb; padding: 15px; border-radius: 8px; border-left: 4px solid #3498db;&quot;&gt;
&nbsp;                                        &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; width=&quot;100%%&quot;&gt;
&nbsp;                                            &lt;tr&gt;
&nbsp;                                                &lt;td width=&quot;65%%&quot; style=&quot;padding-right: 15px;&quot;&gt;
&nbsp;                                                    &lt;p style=&quot;margin: 0; font-size: 14px; color: #7f8c8d;&quot;&gt;PREVIOUS DAY&lt;/p&gt;
&nbsp;                                                    &lt;p style=&quot;margin: 5px 0 0 0; font-size: 20px; color: #34495e; font-weight: 600;&quot;&gt;$%.2f&lt;/p&gt;
&nbsp;                                                &lt;/td&gt;
&nbsp;                                                &lt;td width=&quot;35%%&quot; style=&quot;text-align: right;&quot;&gt;
&nbsp;                                                    &lt;p style=&quot;margin: 0; font-size: 14px; color: #7f8c8d;&quot;&gt;CHANGE&lt;/p&gt;
&nbsp;                                                    &lt;p style=&quot;margin: 5px 0 0 0; font-size: 16px; color: #4CAF50; font-weight: 600;&quot;&gt;+%.1f%%&lt;/p&gt;
&nbsp;                                                &lt;/td&gt;
&nbsp;                                            &lt;/tr&gt;
&nbsp;                                        &lt;/table&gt;
&nbsp;                                    &lt;/td&gt;
&nbsp;                                &lt;/tr&gt;
&nbsp;                            &lt;/table&gt;
&nbsp;                        &lt;/td&gt;
&nbsp;                    &lt;/tr&gt;
&nbsp;                &lt;/table&gt;
&nbsp;            &lt;/td&gt;
&nbsp;        &lt;/tr&gt;
&nbsp;        
&nbsp;        &lt;!-- Footer --&gt;
&nbsp;        &lt;tr&gt;
&nbsp;            &lt;td style=&quot;background-color: #2c3e50; color: #ffffff; padding: 25px 30px; border-radius: 0 0 10px 10px; text-align: center;&quot;&gt;
&nbsp;                &lt;p style=&quot;margin: 0 0 10px 0; font-size: 14px; line-height: 1.6;&quot;&gt;For detailed analysis and insights, log in to your NAILSYNC dashboard&lt;/p&gt;
&nbsp;                &lt;p style=&quot;margin: 20px 0 0 0; font-size: 13px; color: #bdc3c7;&quot;&gt;© 2025 NAILSYNC • All rights reserved&lt;/p&gt;
&nbsp;            &lt;/td&gt;
&nbsp;        &lt;/tr&gt;
&nbsp;    &lt;/table&gt;
&nbsp;&lt;/body&gt;
&nbsp;&lt;/html&gt;
<b class="fc">&nbsp;&quot;&quot;&quot;.formatted(formattedDate, totalEarnings, totalEarnings * 0.9, ((totalEarnings / (totalEarnings * 0.9)) - 1) * 100);</b>
&nbsp;
<b class="fc">&nbsp;        helper.setText(body, true); // true = isHtml</b>
&nbsp;
&nbsp;        // Add the logo - make sure this file exists in your resources folder
&nbsp;        try {
<b class="fc">&nbsp;            ClassPathResource logo = new ClassPathResource(&quot;NAILSYNC.png&quot;);</b>
<b class="pc">&nbsp;            if (logo.exists()) {</b>
<b class="fc">&nbsp;                helper.addInline(&quot;nailsyncLogo&quot;, logo);</b>
&nbsp;            }
&nbsp;        } catch (Exception e) {
&nbsp;            // Log error but continue - the email will still send without the logo
<b class="nc">&nbsp;            System.err.println(&quot;Error adding logo to email: &quot; + e.getMessage());</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        javaMailSender.send(message);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Sends a stylish email for code redemption with coupon code and user points information.
&nbsp;     *
&nbsp;     * @param recipient   Email address of the recipient
&nbsp;     * @param subject     Subject line for the email
&nbsp;     * @param couponCode  The redemption code to display in the email
&nbsp;     * @param userPoints  The user&#39;s current point balance
&nbsp;     * @throws MessagingException If there&#39;s an error sending the email
&nbsp;     */
&nbsp;    public void redeemCodeEmail(String recipient, String subject, String couponCode, int userPoints) throws MessagingException {
<b class="fc">&nbsp;        MimeMessage message = javaMailSender.createMimeMessage();</b>
<b class="fc">&nbsp;        MimeMessageHelper helper = new MimeMessageHelper(message, true, &quot;UTF-8&quot;);</b>
&nbsp;
<b class="fc">&nbsp;        helper.setFrom(fromEmailId);</b>
<b class="fc">&nbsp;        helper.setTo(recipient);</b>
<b class="fc">&nbsp;        helper.setSubject(subject);</b>
&nbsp;
<b class="fc">&nbsp;        String formattedDate = LocalDate.now().format(DateTimeFormatter.ofPattern(&quot;EEEE, MMMM d, yyyy&quot;));</b>
&nbsp;
<b class="fc">&nbsp;        String body = &quot;&quot;&quot;</b>
&nbsp;&lt;!DOCTYPE html&gt;
&nbsp;&lt;html&gt;
&nbsp;&lt;head&gt;
&nbsp;    &lt;meta charset=&quot;UTF-8&quot;&gt;
&nbsp;    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
&nbsp;&lt;/head&gt;
&nbsp;&lt;body style=&quot;margin: 0; padding: 0; font-family: &#39;Helvetica Neue&#39;, Arial, sans-serif; background-color: #f0f4f8; color: #333333;&quot;&gt;
&nbsp;    &lt;table align=&quot;center&quot; border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; width=&quot;100%%&quot; style=&quot;max-width: 600px; margin: 20px auto;&quot;&gt;
&nbsp;        &lt;!-- Logo Header Bar --&gt;
&nbsp;        &lt;tr&gt;
&nbsp;            &lt;td align=&quot;center&quot; style=&quot;background-color: #2c3e50; padding: 20px; border-radius: 10px 10px 0 0;&quot;&gt;
&nbsp;                &lt;img src=&quot;cid:nailsyncLogo&quot; alt=&quot;NAILSYNC Logo&quot; style=&quot;height: 70px;&quot;&gt;
&nbsp;            &lt;/td&gt;
&nbsp;        &lt;/tr&gt;
&nbsp;        
&nbsp;        &lt;!-- Main Content --&gt;
&nbsp;        &lt;tr&gt;
&nbsp;            &lt;td style=&quot;background-color: #ffffff; padding: 0; border-left: 1px solid #e1e8ed; border-right: 1px solid #e1e8ed;&quot;&gt;
&nbsp;                &lt;!-- Date Header --&gt;
&nbsp;                &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; width=&quot;100%%&quot;&gt;
&nbsp;                    &lt;tr&gt;
&nbsp;                        &lt;td align=&quot;center&quot; style=&quot;padding: 25px 30px 0 30px;&quot;&gt;
&nbsp;                            &lt;h2 style=&quot;margin: 0; color: #2c3e50; font-size: 24px; font-weight: 600;&quot;&gt;Your Coupon Code&lt;/h2&gt;
&nbsp;                            &lt;p style=&quot;margin: 5px 0 0 0; font-size: 16px; color: #7f8c8d;&quot;&gt;%s&lt;/p&gt;
&nbsp;                            &lt;div style=&quot;width: 50px; height: 3px; background-color: #e74c3c; margin: 20px auto;&quot;&gt;&lt;/div&gt;
&nbsp;                        &lt;/td&gt;
&nbsp;                    &lt;/tr&gt;
&nbsp;                &lt;/table&gt;
&nbsp;                
&nbsp;                &lt;!-- Coupon Code Section --&gt;
&nbsp;                &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; width=&quot;100%%&quot;&gt;
&nbsp;                    &lt;tr&gt;
&nbsp;                        &lt;td align=&quot;center&quot; style=&quot;padding: 20px 30px 30px 30px;&quot;&gt;
&nbsp;                            &lt;div style=&quot;background: linear-gradient(135deg, #f6f9fc 0%%, #ecf0f1 100%%); border-radius: 10px; padding: 30px; box-shadow: 0 4px 6px rgba(0,0,0,0.05);&quot;&gt;
&nbsp;                                &lt;p style=&quot;margin: 0 0 10px 0; font-size: 18px; color: #34495e; font-weight: 600;&quot;&gt;YOUR REDEMPTION CODE&lt;/p&gt;
&nbsp;                                &lt;h1 style=&quot;margin: 0; font-size: 38px; font-weight: 700; color: #e74c3c; letter-spacing: 2px; background-color: #fff; padding: 15px; border: 2px dashed #e74c3c; border-radius: 8px;&quot;&gt;%s&lt;/h1&gt;
&nbsp;                                
&nbsp;                                &lt;p style=&quot;margin: 20px 0 0 0; font-size: 14px; color: #7f8c8d;&quot;&gt;Use this code at checkout for your special discount!&lt;/p&gt;
&nbsp;                            &lt;/div&gt;
&nbsp;                            
&nbsp;                            &lt;!-- Points Balance --&gt;
&nbsp;                            &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;margin-top: 20px; width: 100%%;&quot;&gt;
&nbsp;                                &lt;tr&gt;
&nbsp;                                    &lt;td style=&quot;background-color: #f8fafb; padding: 15px; border-radius: 8px; border-left: 4px solid #3498db;&quot;&gt;
&nbsp;                                        &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; width=&quot;100%%&quot;&gt;
&nbsp;                                            &lt;tr&gt;
&nbsp;                                                &lt;td width=&quot;100%%&quot; style=&quot;padding-right: 15px;&quot;&gt;
&nbsp;                                                    &lt;p style=&quot;margin: 0; font-size: 14px; color: #7f8c8d;&quot;&gt;YOUR CURRENT POINTS BALANCE&lt;/p&gt;
&nbsp;                                                    &lt;p style=&quot;margin: 5px 0 0 0; font-size: 24px; color: #3498db; font-weight: 600;&quot;&gt;%d points&lt;/p&gt;
&nbsp;                                                &lt;/td&gt;
&nbsp;                                            &lt;/tr&gt;
&nbsp;                                        &lt;/table&gt;
&nbsp;                                    &lt;/td&gt;
&nbsp;                                &lt;/tr&gt;
&nbsp;                            &lt;/table&gt;
&nbsp;                            
&nbsp;                            &lt;!-- How to use --&gt;
&nbsp;                            &lt;div style=&quot;margin-top: 25px; text-align: left; padding: 20px; background-color: #f9f9f9; border-radius: 8px;&quot;&gt;
&nbsp;                                &lt;h3 style=&quot;margin: 0 0 15px 0; color: #2c3e50; font-size: 18px;&quot;&gt;How to Use Your Coupon:&lt;/h3&gt;
&nbsp;                                &lt;ol style=&quot;margin: 0; padding-left: 20px; color: #34495e;&quot;&gt;
&nbsp;                                    &lt;li style=&quot;margin-bottom: 8px;&quot;&gt;Visit our website or in-store kiosk&lt;/li&gt;
&nbsp;                                    &lt;li style=&quot;margin-bottom: 8px;&quot;&gt;Select your services&lt;/li&gt;
&nbsp;                                    &lt;li style=&quot;margin-bottom: 8px;&quot;&gt;Enter your coupon code at checkout&lt;/li&gt;
&nbsp;                                    &lt;li style=&quot;margin-bottom: 0;&quot;&gt;Enjoy your discount!&lt;/li&gt;
&nbsp;                                &lt;/ol&gt;
&nbsp;                            &lt;/div&gt;
&nbsp;                        &lt;/td&gt;
&nbsp;                    &lt;/tr&gt;
&nbsp;                &lt;/table&gt;
&nbsp;            &lt;/td&gt;
&nbsp;        &lt;/tr&gt;
&nbsp;        
&nbsp;        &lt;!-- Footer --&gt;
&nbsp;        &lt;tr&gt;
&nbsp;            &lt;td style=&quot;background-color: #2c3e50; color: #ffffff; padding: 25px 30px; border-radius: 0 0 10px 10px; text-align: center;&quot;&gt;
&nbsp;                &lt;p style=&quot;margin: 0 0 10px 0; font-size: 14px; line-height: 1.6;&quot;&gt;For more offers and to check your rewards, log in to your NAILSYNC dashboard&lt;/p&gt;
&nbsp;                &lt;p style=&quot;margin: 20px 0 0 0; font-size: 13px; color: #bdc3c7;&quot;&gt;© 2025 NAILSYNC • All rights reserved&lt;/p&gt;
&nbsp;            &lt;/td&gt;
&nbsp;        &lt;/tr&gt;
&nbsp;    &lt;/table&gt;
&nbsp;&lt;/body&gt;
&nbsp;&lt;/html&gt;
<b class="fc">&nbsp;&quot;&quot;&quot;.formatted(formattedDate, couponCode, userPoints);</b>
&nbsp;
<b class="fc">&nbsp;        helper.setText(body, true); // true = isHtml</b>
&nbsp;
&nbsp;        // Add the logo - make sure this file exists in your resources folder
&nbsp;        try {
<b class="fc">&nbsp;            ClassPathResource logo = new ClassPathResource(&quot;NAILSYNC.png&quot;);</b>
<b class="pc">&nbsp;            if (logo.exists()) {</b>
<b class="fc">&nbsp;                helper.addInline(&quot;nailsyncLogo&quot;, logo);</b>
&nbsp;            }
&nbsp;        } catch (Exception e) {
&nbsp;            // Log error but continue - the email will still send without the logo
<b class="nc">&nbsp;            System.err.println(&quot;Error adding logo to email: &quot; + e.getMessage());</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        javaMailSender.send(message);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Sends a styled email with daily earnings summary to an employee.
&nbsp;     *
&nbsp;     * @param recipient     Email address of the recipient
&nbsp;     * @param subject       Subject line for the email
&nbsp;     * @param dailyIncome   Employee&#39;s base earnings for the day
&nbsp;     * @param tip           Tips received for the day
&nbsp;     * @param totalAmount   Total earnings (daily income + tips)
&nbsp;     * @param date          Date of the earnings summary
&nbsp;     * @throws MessagingException If there&#39;s an error sending the email
&nbsp;     */
&nbsp;    public void sendEmployeeDailyIncomeEmail(String recipient, String subject, double dailyIncome, double tip, double totalAmount, LocalDate date) throws MessagingException {
<b class="fc">&nbsp;        MimeMessage message = javaMailSender.createMimeMessage();</b>
<b class="fc">&nbsp;        MimeMessageHelper helper = new MimeMessageHelper(message, true, &quot;UTF-8&quot;);</b>
&nbsp;
<b class="fc">&nbsp;        helper.setFrom(fromEmailId);</b>
<b class="fc">&nbsp;        helper.setTo(recipient);</b>
<b class="fc">&nbsp;        helper.setSubject(subject);</b>
&nbsp;
<b class="fc">&nbsp;        String formattedDate = date.format(DateTimeFormatter.ofPattern(&quot;EEEE, MMMM d, yyyy&quot;));</b>
&nbsp;
<b class="fc">&nbsp;        String body = &quot;&quot;&quot;</b>
&nbsp;&lt;!DOCTYPE html&gt;
&nbsp;&lt;html&gt;
&nbsp;&lt;head&gt;
&nbsp;    &lt;meta charset=&quot;UTF-8&quot;&gt;
&nbsp;    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
&nbsp;&lt;/head&gt;
&nbsp;&lt;body style=&quot;margin: 0; padding: 0; font-family: &#39;Helvetica Neue&#39;, Arial, sans-serif; background-color: #f0f4f8; color: #333333;&quot;&gt;
&nbsp;    &lt;table align=&quot;center&quot; border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; width=&quot;100%%&quot; style=&quot;max-width: 600px; margin: 20px auto;&quot;&gt;
&nbsp;        &lt;!-- Logo Header --&gt;
&nbsp;        &lt;tr&gt;
&nbsp;            &lt;td align=&quot;center&quot; style=&quot;background-color: #2c3e50; padding: 20px; border-radius: 10px 10px 0 0;&quot;&gt;
&nbsp;                &lt;img src=&quot;cid:nailsyncLogo&quot; alt=&quot;NAILSYNC Logo&quot; style=&quot;height: 70px;&quot;&gt;
&nbsp;            &lt;/td&gt;
&nbsp;        &lt;/tr&gt;
&nbsp;        
&nbsp;        &lt;!-- Main Content --&gt;
&nbsp;        &lt;tr&gt;
&nbsp;            &lt;td style=&quot;background-color: #ffffff; padding: 0; border-left: 1px solid #e1e8ed; border-right: 1px solid #e1e8ed;&quot;&gt;
&nbsp;                &lt;!-- Date Header --&gt;
&nbsp;                &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; width=&quot;100%%&quot;&gt;
&nbsp;                    &lt;tr&gt;
&nbsp;                        &lt;td align=&quot;center&quot; style=&quot;padding: 25px 30px 0 30px;&quot;&gt;
&nbsp;                            &lt;h2 style=&quot;margin: 0; color: #2c3e50; font-size: 24px; font-weight: 600;&quot;&gt;Daily Earnings Summary&lt;/h2&gt;
&nbsp;                            &lt;p style=&quot;margin: 5px 0 0 0; font-size: 16px; color: #7f8c8d;&quot;&gt;%s&lt;/p&gt;
&nbsp;                            &lt;div style=&quot;width: 50px; height: 3px; background-color: #e74c3c; margin: 20px auto;&quot;&gt;&lt;/div&gt;
&nbsp;                        &lt;/td&gt;
&nbsp;                    &lt;/tr&gt;
&nbsp;                &lt;/table&gt;
&nbsp;                
&nbsp;                &lt;!-- Earnings Breakdown --&gt;
&nbsp;                &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; width=&quot;100%%&quot;&gt;
&nbsp;                    &lt;tr&gt;
&nbsp;                        &lt;td align=&quot;center&quot; style=&quot;padding: 20px 30px 30px 30px;&quot;&gt;
&nbsp;                            &lt;!-- Base Earnings --&gt;
&nbsp;                            &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;margin-bottom: 20px; width: 100%%;&quot;&gt;
&nbsp;                                &lt;tr&gt;
&nbsp;                                    &lt;td style=&quot;background-color: #f8fafb; padding: 15px; border-radius: 8px; border-left: 4px solid #3498db;&quot;&gt;
&nbsp;                                        &lt;p style=&quot;margin: 0; font-size: 14px; color: #7f8c8d;&quot;&gt;DAILY INCOME&lt;/p&gt;
&nbsp;                                        &lt;p style=&quot;margin: 5px 0 0 0; font-size: 24px; color: #3498db; font-weight: 600;&quot;&gt;$%.2f&lt;/p&gt;
&nbsp;                                    &lt;/td&gt;
&nbsp;                                &lt;/tr&gt;
&nbsp;                            &lt;/table&gt;
&nbsp;                            
&nbsp;                            &lt;!-- Tips --&gt;
&nbsp;                            &lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; style=&quot;margin-bottom: 20px; width: 100%%;&quot;&gt;
&nbsp;                                &lt;tr&gt;
&nbsp;                                    &lt;td style=&quot;background-color: #f8fafb; padding: 15px; border-radius: 8px; border-left: 4px solid #27ae60;&quot;&gt;
&nbsp;                                        &lt;p style=&quot;margin: 0; font-size: 14px; color: #7f8c8d;&quot;&gt;TIPS&lt;/p&gt;
&nbsp;                                        &lt;p style=&quot;margin: 5px 0 0 0; font-size: 24px; color: #27ae60; font-weight: 600;&quot;&gt;$%.2f&lt;/p&gt;
&nbsp;                                    &lt;/td&gt;
&nbsp;                                &lt;/tr&gt;
&nbsp;                            &lt;/table&gt;
&nbsp;                            
&nbsp;                            &lt;!-- Total --&gt;
&nbsp;                            &lt;div style=&quot;background: linear-gradient(135deg, #f6f9fc 0%%, #ecf0f1 100%%); border-radius: 10px; padding: 30px; box-shadow: 0 4px 6px rgba(0,0,0,0.05); margin-bottom: 20px;&quot;&gt;
&nbsp;                                &lt;p style=&quot;margin: 0 0 10px 0; font-size: 18px; color: #34495e; font-weight: 600;&quot;&gt;TOTAL EARNINGS&lt;/p&gt;
&nbsp;                                &lt;h1 style=&quot;margin: 0; font-size: 38px; font-weight: 700; color: #e74c3c; letter-spacing: 2px; background-color: #fff; padding: 15px; border: 2px dashed #e74c3c; border-radius: 8px;&quot;&gt;$%.2f&lt;/h1&gt;
&nbsp;                            &lt;/div&gt;
&nbsp;                            
&nbsp;                            &lt;!-- Footer Message --&gt;
&nbsp;                            &lt;div style=&quot;margin-top: 25px; text-align: left; padding: 20px; background-color: #f9f9f9; border-radius: 8px;&quot;&gt;
&nbsp;                                &lt;h3 style=&quot;margin: 0 0 15px 0; color: #2c3e50; font-size: 18px;&quot;&gt;Payment Information&lt;/h3&gt;
&nbsp;                                &lt;p style=&quot;margin: 0; color: #34495e;&quot;&gt;This amount will be processed through our payroll system. Please allow 2-3 business days for bank processing.&lt;/p&gt;
&nbsp;                            &lt;/div&gt;
&nbsp;                        &lt;/td&gt;
&nbsp;                    &lt;/tr&gt;
&nbsp;                &lt;/table&gt;
&nbsp;            &lt;/td&gt;
&nbsp;        &lt;/tr&gt;
&nbsp;        
&nbsp;        &lt;!-- Footer --&gt;
&nbsp;        &lt;tr&gt;
&nbsp;            &lt;td style=&quot;background-color: #2c3e50; color: #ffffff; padding: 25px 30px; border-radius: 0 0 10px 10px; text-align: center;&quot;&gt;
&nbsp;                &lt;p style=&quot;margin: 0 0 10px 0; font-size: 14px; line-height: 1.6;&quot;&gt;View your earnings history and manage payments in your NAILSYNC account&lt;/p&gt;
&nbsp;                &lt;p style=&quot;margin: 20px 0 0 0; font-size: 13px; color: #bdc3c7;&quot;&gt;© 2025 NAILSYNC • All rights reserved&lt;/p&gt;
&nbsp;            &lt;/td&gt;
&nbsp;        &lt;/tr&gt;
&nbsp;    &lt;/table&gt;
&nbsp;&lt;/body&gt;
&nbsp;&lt;/html&gt;
<b class="fc">&nbsp;&quot;&quot;&quot;.formatted(formattedDate, dailyIncome, tip, totalAmount);</b>
&nbsp;
<b class="fc">&nbsp;        helper.setText(body, true);</b>
&nbsp;
&nbsp;        try {
<b class="fc">&nbsp;            ClassPathResource logo = new ClassPathResource(&quot;NAILSYNC.png&quot;);</b>
<b class="pc">&nbsp;            if (logo.exists()) {</b>
<b class="fc">&nbsp;                helper.addInline(&quot;nailsyncLogo&quot;, logo);</b>
&nbsp;            }
&nbsp;        } catch (Exception e) {
<b class="nc">&nbsp;            System.err.println(&quot;Error adding logo to email: &quot; + e.getMessage());</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        javaMailSender.send(message);</b>
&nbsp;    }
&nbsp;
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2025-05-08 04:06</div>
</div>
</body>
</html>
